---
title: 思锐科技
date: 2021-08-27
tags:
---



## 字段是日期，当时最后要求查出来是月份，月度金额

核心：date_format(date,%m)、month(date)

```sql
drop table if exists Salary;
create table Salary (
    id int not null auto_increment primary key,
    date datetime not null,
    profit double not null
);

insert into Salary (id, date, profit) VALUES (null,'2018-03-04',100);
insert into Salary (id, date, profit) VALUES (null,'2018-03-05',200);
insert into Salary (id, date, profit) VALUES (null,'2018-04-04',300);
insert into Salary (id, date, profit) VALUES (null,'2018-04-04',300);
insert into Salary (id, date, profit) VALUES (null,'2018-06-04',200);
insert into Salary (id, date, profit) VALUES (null,'2018-07-04',200);

select * from Salary;

# 月利润
select DATE_FORMAT(date,'%m'), sum(Salary.profit) from si_rui.Salary group by DATE_FORMAT(date,'%m') ;
```



```sql
# 月利润
select MONTH(date) as '月度', sum(Salary.profit) as '月利润' from si_rui.Salary group by MONTH(date);
```



```sql
# 年利润
select DATE_FORMAT(date,'%Y') as '月度', sum(Salary.profit) as '月利润' from si_rui.Salary group by DATE_FORMAT(date,'%Y') ;
```



## js中checkbox如何设置取消

```javascript
var check = document.getElementsByTagName('input')[0];
check = false;
```

## sql包含三的

like匹配整个单元格，regexp匹配单元格的值



举例：名字中带'三'的

`select * from jwt_test.user where username like '%三%';`

`select * from jwt_test.user where username regexp '三'`

举例：名字带'三'或'四'的

`select * from user where username regexp '三|四'`



## spring的包

Beans context 提供IOC

expression jdbc orm test  tx事务 webmvc websocket通信

## springmvc是控制器单例的，有什么问题，如何解决

默认是单例的。

```java
@Controller
@RequestMapping("/demo")
public class MultViewController {
    
    private static int st = 0;      //静态的
    private int index = 0;          //非静态
   
    @RequestMapping("/test")
    public void test() {
    
        System.out.println(st++ + " | " + index++);
    }
}
```

当多个请求即多个线程访问时，出现资源重复增加，而我们想要的不是这样，每个请求访问Controller应该有独立的属性。

```
左静态 右非静态
0 | 0
1 | 1
2 | 2
3 | 3
4 | 4
```



改为多例模式

controller增加注解:

```
@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)
```

输出结果如下，可见静态资源不管是单例还是多例，表现都一致，而非静态不一致。

```
左静态 右非静态
0 | 0
1 | 0
2 | 0
3 | 0
4 | 0
```

解决方案是：

1. 不要再controller中定义成员变量
2. 定义非静态成员变量时，通过@Scope(prototype)设置为多例模式



## 单表1000万的数据量的经历

## ajax是什么，异步和同步有什么区别



## a中有3个开关，b中有3个灯，互相看不见

## 100个自然数，99个放入数组arr，找出没有放入的那个

## 运行时异常和一般异常有什么区别，spring的事务怎么处理

## 如何知道一串中英文字符串的字节数

```java
    public static void main(String[] args) {
        String string = "我有一个梦想i have a dream";
        byte[] bytes = string.getBytes();
        System.out.println("bytes.length = " + bytes.length);
    }
```

utf-8编码中，一个英文字符占用一个字节，一个汉字占用3~4个字节。



## sql语句如何去重

在表中，可能会包含重复值。这并不成问题，不过，有时您也许希望仅仅列出不同（distinct）的值。

关键词 DISTINCT 用于返回唯一不同的值。

简单举例：`select distinct(Salary) from Employee;`

复杂举例：选出第二高的成绩

```sql
select
(select distinct(`Salary`) from Employee order by Salary desc limit 1,1)
as SecondHighestSalary;
```

![image-20210828222255363](https://tva1.sinaimg.cn/large/008i3skNly1gtwvag2d7yj60f202yjrc02.jpg)

distinct是去重的意思

## list如何去重

```java
@Test
    public void removeDuplicateUser() {
        // 2个同名的人
        User user1 = new User("张三", "123");
        User user2 = new User("张三", "888");
        User user3 = new User("李四", "789");

        List<User> userList = new ArrayList<>();
        userList.add(user1);
        userList.add(user2);
        userList.add(user3);
        System.out.println("去重前");
        System.out.println(userList);
        HashSet<String> hashSet = new HashSet<>();
        List<User> unique = userList.stream()
                .filter(e -> {
                    // 如果已经存在 返回false
                    // filter接收一个断言
                    return hashSet.add(e.getUsername());
                })
                .collect(Collectors.toList());
        System.out.println("去重后");
        System.out.println(unique);
    }
```



## 索引问题 外键是否建立了索引



## 如何防止sql注入

## 如果两个线程同时对某个文件写入会发生什么？

## vue手动实现v-model

